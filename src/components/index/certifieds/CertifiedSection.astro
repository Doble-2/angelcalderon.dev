---
import CertifiedContainer from "./CertifiedContainer.astro";
import { getFirestore, collection, getDocs } from "firebase/firestore";
import app from "../../../firebase/client";

const db = getFirestore(app);

const queryCertifieds = await getDocs(collection(db, "certifieds"));
const docsCertifieds = [];
queryCertifieds.forEach((doc) => {
    docsCertifieds.push({ ...doc.data(), id: doc.id });
});
const certifieds = docsCertifieds.sort((a, b) => {
    if (a.order > b.order) {
        return -1;
    }
    if (a.order < b.order) {
        return 1;
    }
    return 0;
});
console.log(certifieds);
---

<div
    class="grid flex items-center main-section sm:flex max-w-screen-xl mx-auto lg:gap-8 xl:gap-0 lg:grid-cols-12"
>
    <div class="flex-col">
        <div class="mb-4 sm:mb-0 sm:mr-12 place-self-center lg:col-span-7">
            <div class="">
                <h2
                    class="text-3xl mb-2 font-extrabold md:text-3xl xl:text-4xl"
                >
                    Certificados
                </h2>
            </div>
        </div>

        <p class="max-w-2xl mb-2 text-lg md:text-lg lg:text-xl">
            Cuento con certificados en desarrollo web y móvil, he realizado
            cursos en plataformas como Platzi y Google Actívate.
        </p>

        <p class="max-w-2xl mb-2 text-lg md:text-lg lg:text-xl">
            Tambien he participado en hackatones y eventos de tecnología, como
            las Codicon Yummy de Lexpin en las que obtuve una mención especial
            en Yummy(2023) y un segundo Lugar en Lexpin(2024).
        </p>
    </div>
</div>

<div class="mb-4 grid grid-cols-3 gap-1">
    {certifieds.map((certified) => (
        <CertifiedContainer
            className="col-span-1 bg-sky-800 max-w-32"
            href={"/certifieds/" + certified.id+'.pdf'}
            title={certified.name}
            image={"/certifieds/" + certified.id+'.jpg'}
        />
    ))}
</div>
